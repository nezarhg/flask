# دليل نشر تطبيق E-deal CRM على منصة Render

هذا الدليل يشرح كيفية نشر تطبيق E-deal CRM على منصة Render بشكل كامل (الواجهة الخلفية والأمامية).

## الملفات المهمة للنشر

تم إعداد الملفات التالية لتسهيل عملية النشر على Render:

1. **render.yaml**: ملف تكوين يحدد كيفية بناء وتشغيل التطبيق على Render
2. **Procfile**: يحدد أمر تشغيل الخادم (gunicorn)
3. **requirements.txt**: يحتوي على جميع مكتبات Python المطلوبة
4. **backend/config.py**: تم تعديله للتعامل مع المتغيرات البيئية في Render

## خطوات النشر على Render

### 1. إنشاء حساب على Render

إذا لم يكن لديك حساب على Render، قم بإنشاء حساب جديد على [render.com](https://render.com).

### 2. إنشاء مشروع جديد

1. قم بتسجيل الدخول إلى لوحة تحكم Render
2. انقر على زر "New" واختر "Blueprint"
3. قم بربط حساب GitHub أو GitLab الخاص بك
4. اختر المستودع الذي يحتوي على كود التطبيق

### 3. تكوين النشر التلقائي

Render سيكتشف تلقائيًا ملف `render.yaml` ويقوم بإعداد خدمتين:
- **edeal-crm-backend**: الواجهة الخلفية (Flask)
- **edeal-crm-frontend**: الواجهة الأمامية (React)

### 4. إعداد المتغيرات البيئية

قد تحتاج إلى إضافة أو تعديل بعض المتغيرات البيئية في لوحة تحكم Render:

1. انتقل إلى خدمة `edeal-crm-backend`
2. اذهب إلى قسم "Environment"
3. أضف المتغيرات البيئية التالية:
   - `SECRET_KEY`: مفتاح سري آمن للتطبيق
   - `JWT_SECRET_KEY`: مفتاح سري آمن لرموز JWT
   - `FLASK_ENV`: اضبطه على `production`

### 5. إعداد قاعدة البيانات

Render يوفر قواعد بيانات PostgreSQL:

1. انقر على "New" واختر "PostgreSQL"
2. أكمل النموذج بالمعلومات المطلوبة
3. بعد إنشاء قاعدة البيانات، انسخ عنوان الاتصال (Internal Database URL)
4. أضف هذا العنوان كمتغير بيئي `DATABASE_URL` في خدمة `edeal-crm-backend`

### 6. تشغيل النشر

1. انقر على "Blueprint" الخاص بمشروعك
2. انقر على زر "Apply Blueprint"
3. انتظر حتى يكتمل النشر (قد يستغرق بضع دقائق)

### 7. الوصول إلى التطبيق

بعد اكتمال النشر، يمكنك الوصول إلى التطبيق من خلال الروابط التي توفرها Render:

- **الواجهة الأمامية**: https://edeal-crm-frontend.onrender.com
- **الواجهة الخلفية**: https://edeal-crm-backend.onrender.com

## استكشاف الأخطاء وإصلاحها

إذا واجهت أي مشاكل أثناء النشر، يمكنك التحقق من سجلات الخدمة في لوحة تحكم Render:

1. انتقل إلى الخدمة المعنية
2. انقر على تبويب "Logs"
3. راجع السجلات للتعرف على أي أخطاء

## تحديث التطبيق

لتحديث التطبيق بعد إجراء تغييرات على الكود:

1. ادفع التغييرات إلى المستودع المرتبط
2. Render سيكتشف التغييرات تلقائيًا ويبدأ عملية نشر جديدة

## ملاحظات هامة

1. **الأمان**: تأكد من تغيير جميع المفاتيح السرية في المتغيرات البيئية
2. **الأداء**: Render يوفر خطط مجانية ومدفوعة، الخطط المجانية قد تكون أبطأ وتدخل في وضع السكون بعد فترة من عدم النشاط
3. **المجال المخصص**: يمكنك إعداد مجال مخصص للتطبيق من خلال إعدادات الخدمة في Render

## الدعم الفني

إذا واجهتك أي مشكلة أثناء عملية النشر، يرجى التواصل مع فريق الدعم الفني لنظام E-deal أو مراجعة [وثائق Render](https://render.com/docs).
